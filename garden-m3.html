<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Garden - Material Design 3</title>
    
    <!-- Material Design 3 Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="garden-m3.css">
    <link rel="stylesheet" href="garden-featured-styles.css">
    
    <!-- Marked.js for proper markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- D3.js for graph visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <!-- Top App Bar -->
    <header class="top-app-bar">
        <button class="icon-button" id="menuButton" title="Toggle navigation">
            <span class="material-symbols-outlined">menu</span>
        </button>
        
        <div class="top-app-bar-title">
            <span id="pageTitle">Knowledge Garden</span>
        </div>
        
        <div class="breadcrumb-wrapper" id="breadcrumb">
            <span class="breadcrumb-link" onclick="garden.loadMainIndex()">Home</span>
        </div>
        
        <div class="top-app-bar-actions">
            <button class="icon-button" id="themeToggle" title="Toggle theme">
                <span class="material-symbols-outlined">dark_mode</span>
            </button>
            <button class="filled-tonal-button" onclick="window.location.href='index.html'">
                <span>Back to Portfolio</span>
            </button>
        </div>
    </header>

    <!-- Navigation Rail (Desktop) -->
    <nav class="navigation-rail">
        <button class="nav-fab" onclick="garden.loadMainIndex()" title="Home">
            <span class="material-symbols-outlined">home</span>
        </button>
        
        <button class="nav-destination" data-destination="notes" title="All Notes">
            <span class="material-symbols-outlined">description</span>
        </button>
        
        <button class="nav-destination" data-destination="recent" title="Recent">
            <span class="material-symbols-outlined">schedule</span>
        </button>
        
        <button class="nav-destination" data-destination="search" title="Search">
            <span class="material-symbols-outlined">search</span>
        </button>
        
        <button class="nav-destination" id="graphToggleBtn" title="Toggle Graph">
            <span class="material-symbols-outlined">account_tree</span>
        </button>
    </nav>

    <!-- Navigation Drawer (Sidebar) -->
    <aside class="navigation-drawer" id="navigationDrawer">
        <div class="drawer-header">
            <h2>üìö Table of Contents</h2>
        </div>
        <ul class="folder-list" id="folderStructure">
            <!-- Will be populated dynamically -->
        </ul>
    </aside>

    <!-- Main Content Area -->
    <main class="content-area" id="contentArea">
        <!-- Featured Projects Section -->
        <section class="featured-projects-section" id="featuredProjects">
            <div class="featured-header">
                <span class="material-symbols-outlined featured-icon">stars</span>
                <h2>Featured Technical Projects</h2>
                <p class="featured-subtitle">Showcasing practical implementation of IT concepts and systems architecture</p>
            </div>
            
            <div class="featured-grid">
                <!-- GrapheneOS Migration -->
                <div class="featured-card" onclick="garden.loadNote('GrapheneOS Migration Guide - Complete Documentation.md')">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üõ°Ô∏è</div>
                        <div class="featured-badge privacy">Privacy & Security</div>
                    </div>
                    <h3>GrapheneOS Migration</h3>
                    <p>Complete documentation of privacy-focused mobile OS migration, including carrier compatibility analysis and security hardening.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">GrapheneOS</span>
                        <span class="featured-tag">Privacy</span>
                        <span class="featured-tag">Android</span>
                        <span class="featured-tag">Security</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill advanced"></div></div>
                    <div class="complexity-label">Complexity: Advanced</div>
                </div>
                
                <!-- TrueNAS Build -->
                <div class="featured-card" onclick="garden.loadNote('TrueNAS Build Guide.md')">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üíæ</div>
                        <div class="featured-badge storage">Storage & Infrastructure</div>
                    </div>
                    <h3>Enterprise NAS Architecture</h3>
                    <p>Custom TrueNAS build with ZFS RAID-Z2, enterprise SAS drives, and LSI controller integration for reliable data storage.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">TrueNAS</span>
                        <span class="featured-tag">ZFS</span>
                        <span class="featured-tag">SAS</span>
                        <span class="featured-tag">Homelab</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill expert"></div></div>
                    <div class="complexity-label">Complexity: Expert</div>
                </div>
                
                <!-- Pi-hole -->
                <div class="featured-card" onclick="garden.loadNote('Homelab/Pi-hole Setup Guide - Complete Journey.md')">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üåê</div>
                        <div class="featured-badge network">Network Security</div>
                    </div>
                    <h3>DNS-Level Ad Blocking</h3>
                    <p>Pi-hole deployment with Unbound recursive DNS and WireGuard VPN integration for network-wide privacy protection.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">Pi-hole</span>
                        <span class="featured-tag">DNS</span>
                        <span class="featured-tag">Raspberry Pi</span>
                        <span class="featured-tag">VPN</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill intermediate"></div></div>
                    <div class="complexity-label">Complexity: Intermediate</div>
                </div>
                
                <!-- WireGuard VPN -->
                <div class="featured-card" onclick="garden.loadNote('WireGuard VPN Setup.md')">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üîê</div>
                        <div class="featured-badge network">Network Security</div>
                    </div>
                    <h3>WireGuard VPN Implementation</h3>
                    <p>Modern VPN setup with WireGuard protocol for secure remote access and network traffic encryption.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">WireGuard</span>
                        <span class="featured-tag">VPN</span>
                        <span class="featured-tag">Networking</span>
                        <span class="featured-tag">Security</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill intermediate"></div></div>
                    <div class="complexity-label">Complexity: Intermediate</div>
                </div>
                
                <!-- Budget NAS -->
                <div class="featured-card" onclick="garden.loadNote('Projects/Budget SAS Drive NAS Build Guide.md')">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üí∞</div>
                        <div class="featured-badge storage">Cost Optimization</div>
                    </div>
                    <h3>Budget SAS NAS Build</h3>
                    <p>Cost-effective enterprise storage solution using 10x SAS drives ($5 each) with LSI controller for high-capacity homelab storage.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">SAS Drives</span>
                        <span class="featured-tag">Budget Build</span>
                        <span class="featured-tag">LSI Controller</span>
                        <span class="featured-tag">Storage</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill advanced"></div></div>
                    <div class="complexity-label">Complexity: Advanced</div>
                </div>
                
                <!-- Interactive Knowledge Graph -->
                <div class="featured-card featured-card-special">
                    <div class="featured-card-header">
                        <div class="featured-card-icon">üå∏</div>
                        <div class="featured-badge dev">Web Development</div>
                    </div>
                    <h3>Interactive Knowledge Graph</h3>
                    <p>D3.js-powered force-directed graph visualization integrated with GitHub API. Features zoom controls, node dragging, and Material Design 3 aesthetics.</p>
                    <div class="featured-tags">
                        <span class="featured-tag">D3.js</span>
                        <span class="featured-tag">JavaScript</span>
                        <span class="featured-tag">Material Design</span>
                        <span class="featured-tag">GitHub API</span>
                    </div>
                    <div class="complexity-meter"><div class="complexity-fill expert"></div></div>
                    <div class="complexity-label">Complexity: Expert</div>
                    <div class="current-page-indicator">üìç You are here</div>
                </div>
            </div>
        </section>
        
        <div class="note-container">
            <article class="note-card">
                <div class="note-content" id="noteContent">
                    <!-- Content will be loaded here -->
                </div>
            </article>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner"></div>

    <!-- Corner Knowledge Graph Widget -->
    <div class="corner-graph-widget" id="cornerGraphWidget">
        <div class="corner-graph-header" id="cornerGraphHeader">
            <div class="graph-title">
                <span class="material-symbols-outlined">account_tree</span>
                <span id="cornerGraphTitle">Knowledge Map</span>
            </div>
            <div class="connection-count" id="connectionCount">Loading...</div>
            <div class="graph-controls">
                <button class="icon-button" id="zoomInBtn" title="Zoom In">
                    <span class="material-symbols-outlined">add</span>
                </button>
                <button class="icon-button" id="zoomOutBtn" title="Zoom Out">
                    <span class="material-symbols-outlined">remove</span>
                </button>
                <button class="icon-button" id="cornerExpandBtn" title="Expand">
                    <span class="material-symbols-outlined">open_in_full</span>
                </button>
                <button class="icon-button" id="cornerMinimizeBtn" title="Minimize">
                    <span class="material-symbols-outlined">minimize</span>
                </button>
            </div>
        </div>
        
        <div class="corner-graph-container" id="cornerGraphContainer">
            <svg id="cornerGraphSvg" width="100%" height="100%"></svg>
            <div class="graph-status-indicator"></div>
        </div>
        
        <div class="graph-tooltip" id="graphTooltip"></div>
    </div>

    <script src="garden-m3.js"></script>
    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('.material-symbols-outlined');
        
        // Check for saved theme preference or default to light mode
        const currentTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', currentTheme);
        themeIcon.textContent = currentTheme === 'dark' ? 'light_mode' : 'dark_mode';
        
        themeToggle.addEventListener('click', () => {
            const theme = document.documentElement.getAttribute('data-theme');
            const newTheme = theme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeIcon.textContent = newTheme === 'dark' ? 'light_mode' : 'dark_mode';
        });
        
        // Navigation Drawer Toggle
        const menuButton = document.getElementById('menuButton');
        const navigationDrawer = document.getElementById('navigationDrawer');
        const contentArea = document.getElementById('contentArea');
        
        menuButton.addEventListener('click', () => {
            navigationDrawer.classList.toggle('open');
            contentArea.classList.toggle('drawer-open');
        });
    </script>
</body>
</html>